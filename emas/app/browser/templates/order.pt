<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="emas.theme">
<body>

    <metal:core fill-slot="main">
        <h1 class="documentFirstHeading">Order form</h1>

        <div id="content-core"
            tal:define="isAnon context/@@plone_portal_state/anonymous;
                        action python:view.action(isAnon);">
            <div id="individual-order-form" class="selectpackage">

                <form id="individual-orderform" name="orderform" 
                      class="update-action" method="POST"
                    tal:attributes="action action;
                                    base_action action;">

                    <input type="hidden" name="order.form.submitted" value="true"/>
                    <input type="hidden" name="isAnon" value="True"
                        tal:attributes="value isAnon"/>
                    <input type="hidden" name="ordernumber" value=""
                        tal:attributes="value view/ordernumber"/>
                    
                    <fieldset id="login-links" tal:condition="isAnon"
                        tal:define="login_url string:${context/absolute_url}/login;
                                    register_url string:${context/absolute_url}/@@register;">
                        <legend id='loginrequest'>
                            You are not logged in, for Intelligent Practice you need an account on the site. Please <a href="#" tal:attributes="href login_url">login</a> or <a href="#" tal:attributes="href register_url">register</a>. 
                        </legend>
                    </fieldset>

                    <h2>Subject</h2>
                    <fieldset
                        tal:define="selected view/subjects">
                        <legend>
                            Choose your subject(s) and grade:
                        </legend>
                        <p>
                            <input name="subjects"
                                   checked=""
                                   tal:attributes="checked python:view.subject_selected('Maths', selected)"
                                   value="Maths"
                                   type="radio"
                                   multiplier="1"> Maths

                           <input name="subjects"
                                  checked=""
                                  tal:attributes="checked python:view.subject_selected('Science', selected)"
                                  value="Science"
                                  multiplier="1"
                                  type="radio"> Science

                           <input name="subjects"
                                  checked=""
                                  tal:attributes="checked python:view.subject_selected('Maths,Science', selected)"
                                  multiplier="2"
                                  value="Maths,Science"
                                  type="radio"> Both Maths &amp; Science
                        </p>
                        <p
                            tal:define="selected view/grade">
                            <input name="grade"
                                   checked=""
                                   tal:attributes="checked python:view.grade_selected('grade10', selected)"
                                   value="grade10"
                                   type="radio"> Grade 10 (CAPS)
                            <input name="grade" 
                                   checked=""
                                   tal:attributes="checked python:view.grade_selected('grade11', selected)"
                                   value="grade11" 
                                   type="radio"> Grade 11 (CAPS)
                            <input name="grade"
                                   checked=""
                                   tal:attributes="checked python:view.grade_selected('grade12', selected)"
                                   value="grade12" 
                                   type="radio"> Grade 12 (NCS)
                        </p>
                    </fieldset>

                    <h2>Product</h2>

                    <fieldset
                        tal:define="selected view/prod_practice_book">

                        <legend>
                            Select your product:
                        </legend>

                        <fieldset>
                            <p>
                            <input name="prod_practice_book"
                                   checked=""
                                   tal:attributes="checked python:view.prod_practice_book_selected('Practice,Textbook', selected)"
                                   class="textbook add-textbook"
                                   value="Practice,Textbook" 
                                   type="radio" 
                                   price="200"> Intelligent Practice and a textbook [per subject: <strong>1</strong> textbook and one year subscription <strong>R200</strong>]
                            </p>
                        </fieldset>
                        <fieldset>
                            <p>
                                <input name="prod_practice_book" 
                                   checked=""
                                   tal:attributes="checked python:view.prod_practice_book_selected('Practice', selected)"
                                   class="no-textbook" 
                                   value="Practice" 
                                   type="radio" 
                                   price="150"> Intelligent Practice only (no textbook) [per subject: one year subscription <strong>R150</strong>]
                            </p>
                        </fieldset>
                        <fieldset>
                            <p>
                                <input name="prod_practice_book"
                                   checked=""
                                   tal:attributes="checked python:view.prod_practice_book_selected('Textbook', selected)"
                                   class="add-textbook"
                                   value="Textbook"
                                   type="radio"
                                   price="95"> Textbook only (no Intelligent Practice) [per subject: <strong>R95</strong>]
                            </p>
                        </fieldset>

                    </fieldset>
                    <h2>How would you like to pay?</h2>
                    <fieldset
                        tal:define="selected view/prod_payment">
                        <p>
                            <input name="prod_payment"
                                checked=""
                                tal:attributes="checked python:view.prod_payment_selected('creditcard', selected)"
                                value="creditcard"
                                type="radio"> Credit Card payment<br />
                        </p>
                        <p>
                            <input name="prod_payment"
                                checked=""
                                tal:attributes="checked python:view.prod_payment_selected('eft', selected)"
                                value="eft"
                                type="radio"> Electronic Funds Transfer (EFT)<br />
                        </p>
                    </fieldset>

                    <div id='bookonly' class='hidden'>
                        <fieldset>
                            <legend id='postaladdress'>
                                You have requested a <b>textbook</b>, we need to know your details for delivery: 
                            </legend>
                            <p>
                                Name and surname:<input name="fullname" value=""
                                    type="text"
                                    tal:attributes="value view/fullname">
                            </p>
                            <p>
                                Phone number:<input name="phone" value=""
                                    type="text"
                                    tal:attributes="value view/phone">
                            </p>
                            <p>
                                Postal address: <textarea name="shipping_address"
                                    tal:content="structure view/shipping_address"></textarea>
                            </p>
                        </fieldset>
                    </div>

                    <div class="ordertotal">
                        <div>
                            Total = <span id="totalcost" class="amount">R0</span>
                        </div>

                        <button type="submit" class="button generic no-icon small-caps allowMultiSubmit" name="submit" value="1">Submit
                        </button>
                    </div>

                    <fieldset id="login-links" tal:condition="isAnon"
                        tal:define="login_url string:${context/absolute_url}/login;
                                    register_url string:${context/absolute_url}/@@register;">
                        <legend id='loginrequest'>
                            You are not logged in, for Intelligent Practice you need an account on the site. Please <a href="#" tal:attributes="href login_url">login</a> or <a href="#" tal:attributes="href register_url">register</a>. 
                        </legend>
                    </fieldset>

                </form>
            </div>
        </div>

    </metal:core>

</body>
</html>
