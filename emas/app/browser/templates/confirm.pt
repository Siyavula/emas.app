<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="emas.theme">
<body>

    <metal:core fill-slot="main">
        <h1 class="documentFirstHeading">Order confirmation</h1>

        <div id="content-core"
            tal:define="isAnon context/@@plone_portal_state/anonymous;">

            <div id="payment-form-container" class="selectpackage">

                <h2>You have ordered the following</h2>

                <fieldset>
                    <ol>
                        <li tal:repeat="service view/display_items"
                            tal:content="service/Title">1 year sub to Maths
                        </li>
                    </ol>
                </fieldset>

                <div class="ordertotal">
                    <div>
                        Total = <span id="total" class="amount" tal:content="view/totalcost">R0</span>
                    </div>
                </div>

                <h2>How would you like to pay?</h2>

                <form id="payment-form" method="POST" action="."
                    tal:attributes="action view/action"
                    tal:condition="view/creditcard_selected">

                    <fieldset>
                        <input name="orderid" value="4444" type="hidden"
                            tal:attributes="value view/order/getId">

                        <input type="hidden" name="p1" value="1"
                            tal:attributes="value view/vcs_terminal_id">

                        <input type="hidden" name="p2" value="1"
                            tal:attributes="value view/tid">
                            
                        <input type="hidden" name="p3" value="1"
                            tal:attributes="value view/description">
                            
                        <input type="hidden" name="p4" value="1"
                            tal:attributes="value view/cost">

                        <input type="hidden" name="m_1" value="1"
                            tal:attributes="value string:${view/returnurl}">
                            
                        <input type="hidden" name="hash" value="1"
                            tal:attributes="value view/md5hash">

                        <input name="prod_payment" value="creditcard"
                            tal:attributes="checked view/creditcard_selected"
                            type="hidden" checked="checked">

                        <div class="ordertotal">
                            <button id="confirmsubmit" type="submit" class="button generic no-icon small-caps allowMultiSubmit" name="confirmsubmit" value="make payment">Make payment</button>
                        </div>
                            
                    </fieldset>
                </form>

                <form class="backbutton" action="." method="POST"
                    tal:attributes="action string:${context/absolute_url}/@@order" tal:condition="view/creditcard_selected">

                    <!-- all the values from the order form, in case we 
                         want to go back to it.
                    -->
                    <input name="ordernumber" value="" type="hidden"
                        tal:attributes="value view/ordernumber">

                    <input name="subjects" value="" type="hidden"
                        tal:attributes="value view/subjects">

                    <input name="grade" value="" type="hidden"
                        tal:attributes="value view/grade">

                    <input name="prod_practice_book" value="" type="hidden"
                        tal:attributes="value view/prod_practice_book">

                    <input name="prod_payment" value="" type="hidden"
                        tal:attributes="value view/prod_payment" >
                        
                    <input name="fullname" value="" type="hidden"
                        tal:attributes="value view/fullname" >
                        
                    <input name="phone" value="" type="hidden"
                        tal:attributes="value view/phone" >
                        
                    <input name="shipping_address" value="" type="hidden"
                        tal:attributes="value view/shipping_address" >
                        
                    <button id="back" type="submit" class="button generic no-icon small-caps allowMultiSubmit" name="confirm_back_button" value="back">Back</button>
                </form>

            </div>
        </div>

    </metal:core>

</body>
</html>

